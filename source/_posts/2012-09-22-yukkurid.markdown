---
layout: post
title: "yukkurid"
date: 2012-09-22 06:59
comments: true
categories: [ruby,niconico]
keywords: "ruby,ツール,ニコ生,ゆっくり,棒読み"
description: "Linuxでもニコ生で棒読みを使いたいっていうはなし"
---

*ゆっくりしていってね!*

## yukkuridとは?

棒読みちゃん+デーモン

ニコ生をするのに欠かせないの棒読みちゃんというWindowsアプリがありますが、
もちろんWindowsアプリなのでLinuxでは動きませんしWineで動くとしても動かしたくないですよね。

でもやっぱり棒読み機能がないと不便なので作ってみました。

[yukkurid](https://github.com/masarakki/yukkurid)

## 棒読み部分

棒読みちゃんは内部で[AquesTalk2](http://www.a-quest.com/)という読み上げライブラリを使用していて、
これはWindows版だけでなくMacOS版とLinux版のライブラリも配布されています。
**(ただし有料)**

棒読みにはそんなに機能は必要無いので、ほとんどサンプルファイルをそのままコンパイルして、
十分実用なバイナリになりました。

## デーモン部分

sinatraでちょちょっと作って終了です。
POSTで受け取ったデータを、漢字が読めない棒読みちゃんのためにmecabで読みに変換して、
棒読みちゃんに渡して吐かれたwavをALSAに食わせる。
ワンライナーで瞬殺です。

これでPOSTで送信するとコンピュータがゆっくり喋ってくれるようになりました!

## 次の展望

デーモンにさえすれば、実際にニコ生のコメントをchrome extensionから送信して、
コンピュータが喋ってくれるようになるはずです。
EroGetterの時もそうだったけどいちいちデーモンにするのがめんどくさいですがしかたないですね・・・

というわけでchrome extensionのコメビュを作るか既存のをどっかからパクってきて繋ぎこみたいと思います。

あとは今だと喋ってる間ブロックするので非同期化と、それにともなってちゃんとしたキューイングを。

## ところで
[非商用の個人の開発ライセンス](http://www.a-quest.com/licence_free.html)を買ったのですが、

- アプリの機能として、外部ソフトから当社製品ライブラリの機能を呼び出し可能なインターフェースを持たないこと。

ってどういうことなんだろう?
これをラップした raques.gem みたいなのは作っちゃダメなのかな?
.soと.hは自分で用意してねっていう形でならok?
といっても今コンパイル済みバイナリを ./bin/yukkuri に置いてるけど、これも.so無いと動かないよね?
かといって.so同梱できるようなライセンスじゃないよね? そんなんしたら商売上がったりだよね?
あんまC方面わからんからこのライセンスが一体何をしてよくて何をしていけないのかわからない。
